<main class="mt-5">
  <div class="row">
    <form #form="ngForm">
    <div class="col-12">
      <div class="mw-100">
        <h2 style="width: 460px">Olá, {{user.name}}</h2>
      </div>
      <div class="mw-100 mt-2">
        Gerencie seu perfil de usuário
      </div>
    </div>

    <ul class="nav nav-tabs col-12 mt-4">
      <li class="nav-item">
        <a class="nav-link" style="cursor: pointer" [ngClass]="currentMenuTab === 'user' ? 'active' : ''"  (click)="changeTab('user')">Usuário</a>
      </li>
      <li *ngIf="user.profile === 'barber'" class="nav-item">
        <a class="nav-link" style="cursor: pointer" [ngClass]="currentMenuTab === 'barber' ? 'active' : ''" (click)="changeTab('barber')">Barbearia</a>
      </li>
    </ul>

    <div *ngIf="currentMenuTab === 'user'" class="mt-3">
        <div class="form-floating col-md-12 ">
          <input
            [(ngModel)]="user.email"
            disabled
            name="email"
            type="email"
            class="form-control"
            id="floatingEmail"
            placeholder="name@example.com"
            [ngClass]="email.errors?.email && email.dirty ? 'is-invalid' : 'is-valid'"
            #email="ngModel"
            email
          >
          <label for="floatingEmail">E-mail</label>
          <p *ngIf="email.errors?.email && email.dirty" style="color: #DC3545">Digite um e-mail válido</p>
        </div>

        <div class="form-floating col-md-12 mt-3">
          <input
            [(ngModel)]="user.name"
            name="name"
            type="text"
            class="form-control"
            id="floatingName"
            placeholder="Nome de usuário"
            [ngClass]="name.errors?.required && name.dirty ? 'is-invalid' : 'is-valid'"
            #name="ngModel"
            required
          >
          <label for="floatingName">Name</label>
          <p *ngIf="name.errors?.required && name.dirty" style="color: #DC3545">Campo Requerído</p>
        </div>
    </div>

    <div *ngIf="currentMenuTab === 'barber' && user.profile === 'barber'" class="mt-3">
      <div class="form-floating col-md-12">
        <input
          [(ngModel)]="barberShop.name"
          name="name"
          type="text"
          class="form-control"
          id="name"
          placeholder="Barber Shop"
          [ngClass]="barberName.errors?.required && barberName.dirty ? 'is-invalid' : 'is-valid'"
          #barberName="ngModel"
          required
        >
        <label for="name">Name</label>
        <p *ngIf="barberName.errors?.required && barberName.dirty" style="color: #DC3545">Campo Requerído</p>
      </div>

      <div class="form-floating col-md-12 mt-3">
        <input
          [(ngModel)]="barberShop.email"
          name="emailBarber"
          type="text"
          class="form-control"
          id="emailBarber"
          placeholder="E-mail da barbearia"
          [ngClass]="emailBarber.errors?.email && emailBarber.dirty ? 'is-invalid' : 'is-valid'"
          #emailBarber="ngModel"
          email
        >
        <label for="emailBarber">E-mail</label>
        <p *ngIf="emailBarber.errors?.email && emailBarber.dirty" style="color: #DC3545">Digite um e-mail válido</p>
      </div>

      <div class="form-floating col-md-12 mt-3">
        <input
          [(ngModel)]="barberShop.document"
          name="document"
          disabled
          type="text"
          class="form-control"
          id="document"
          placeholder="CNPJ/CPF"
          [ngClass]="document.errors?.required && document.dirty ? 'is-invalid' : 'is-valid'"
          #document="ngModel"
          required
        >
        <label for="document">CNPJ/CPF</label>
        <p *ngIf="document.errors?.required && document.dirty" style="color: #DC3545">Campo requerído</p>
      </div>

      <div class="row">
        <div class="form-floating col-md-6 mt-3">
          <input
            [(ngModel)]="barberShop.zipcode"
            name="zipcode"
            type="text"
            class="form-control"
            id="zipcode"
            placeholder="CEP"
            [ngClass]="zipcode.errors?.required && zipcode.dirty ? 'is-invalid' : 'is-valid'"
            #zipcode="ngModel"
            required
          >
          <label for="zipcode">CEP</label>
          <p *ngIf="zipcode.errors?.required && zipcode.dirty" style="color: #DC3545">Campo requerído</p>
        </div>

        <div class="form-floating col-md-6 mt-3">
          <input
            [(ngModel)]="barberShop.street"
            name="street"
            type="text"
            class="form-control"
            id="street"
            placeholder="Endereço"
            [ngClass]="street.errors?.required && street.dirty ? 'is-invalid' : 'is-valid'"
            #street="ngModel"
            required
          >
          <label for="street">Endereço</label>
          <p *ngIf="street.errors?.required && street.dirty" style="color: #DC3545">Campo requerído</p>
        </div>
      </div>

      <div class="row">
        <div class="form-floating col-md-4 mt-3 ">
          <input
            [(ngModel)]="barberShop.state"
            name="state"
            type="text"
            class="form-control"
            id="state"
            placeholder="Estado"
            [ngClass]="state.errors?.required && state.dirty ? 'is-invalid' : 'is-valid'"
            #state="ngModel"
            required
          >
          <label for="state">Estado</label>
          <p *ngIf="state.errors?.state && state.dirty" style="color: #DC3545">Campo requerído</p>
        </div>

        <div class="form-floating col-md-4 mt-3 ">
          <input
            [(ngModel)]="barberShop.city"
            name="city"
            type="text"
            class="form-control"
            id="city"
            placeholder="Cidade"
            [ngClass]="city.errors?.required && city.dirty ? 'is-invalid' : 'is-valid'"
            #city="ngModel"
            required
          >
          <label for="city">Cidade</label>
          <p *ngIf="city.errors?.required && city.dirty" style="color: #DC3545">Campo requerído</p>
        </div>

        <div class="form-floating col-md-4 mt-3 ">
          <input
            [(ngModel)]="barberShop.streetNumber"
            name="streetNumber"
            type="text"
            class="form-control"
            id="streetNumber"
            placeholder="Número"
          >
          <label for="streetNumber">Número</label>
        </div>
      </div>
    </div>

    <div class="form-group d-flex justify-content-end mt-2">
      <button [disabled]='form.invalid' class="btn btn-lg btn-primary" (click)="onSubmit(form)">Salvar</button>
    </div>
    </form>
  </div>
</main>
